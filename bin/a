#!/bin/sh

usage()
{
    echo "usage: ${0##*/} [start|volume] ARGS" 1>&2
    exit "$@"
}

warn()
{
    echo "${0##*/}: $*" 1>&2
}

err()
{
    warn "$@"
    exit 1
}

cmd_start()
{
    [ $# -ge 1 ] || err "missing start argument (try \`-l' to list applications)"

    case "$1" in
    coc)
        adb shell monkey -p com.supercell.clashofclans -c android.intent.category.LAUNCHER 1
        exit $?
        ;;
    tunein)
        adb shell monkey -p radiotime.player -c android.intent.category.LAUNCHER 1
        ;;
    -l)
        cat << EOF
coc
tunein
EOF
        exit 0
        ;;
    *)
        err "$1: invalid application"
        ;;
    esac
}

cmd_volume()
{
    [ $# -ge 1 ] || err "missing volume argument"

    case "$1" in
    up) adb shell input keyevent 24; exit $?  ;;
    down) adb shell input keyevent 25; exit $?  ;;
    -h)
        echo "usage: ${0##*/} volume [up|down]"
        exit 0
        ;;
    *)
        err "$1: invalid argument"
        ;;
    esac
}

main()
{
    [ $# -ge 1 ] || err "missing arguments"

    case "$1" in
    start) shift; cmd_start "$@" ;;
    volume) shift; cmd_volume "$@" ;;
    -h) usage 0 2>&1 ;;
    *) warn "$1: invalid argument"; usage 1 ;;
    esac
}

main "$@"

# vim:set sw=4 ts=4 et:
